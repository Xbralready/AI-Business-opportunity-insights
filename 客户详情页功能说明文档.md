# AI信贷员 - 客户详情页功能说明文档

> 本文档用于向 GPT 说明客户详情页的完整功能设计，以便生成商务报价功能清单。

---

## 一、产品背景

这是为**常熟银行**设计的 AI 信贷员系统，面向银行对公客户经理使用。一期重点交付**客户详情页**能力，帮助客户经理：
1. 快速了解客户全貌（AI客户画像）
2. 获得智能产品推荐（AI产品推荐）
3. 得到可执行的行动指导（AI行动手册）

---

## 二、页面整体结构

客户详情页分为以下几个区域：

```
┌─────────────────────────────────────────────────────────────┐
│  顶部标题栏：返回按钮 + 客户名称 + 导出报告按钮              │
├─────────────────────────────────────────────────────────────┤
│  模块1：客户基础信息卡片（全宽）                             │
│  - 企业Logo、名称、等级、状态                               │
│  - AI核心洞察（绿色高亮区域）                               │
│  - 智能标签                                                 │
├───────────────────────────────────┬─────────────────────────┤
│  左列（2/3宽度）                  │  右列（1/3宽度）        │
│  ┌─────────────────────────────┐  │  ┌─────────────────────┐│
│  │ 模块2：AI客户画像           │  │  │ 模块4：AI行动手册   ││
│  │ - 七维雷达图                │  │  │ - 行动策略概览      ││
│  │ - 维度标签切换              │  │  │ - 已采纳行动        ││
│  │ - AI解读（正向/负向）       │  │  │ - 待采纳行动列表    ││
│  └─────────────────────────────┘  │  │ - 任务详情/话术     ││
│  ┌─────────────────────────────┐  │  │ - 采纳/完成操作     ││
│  │ 模块3：AI产品推荐           │  │  └─────────────────────┘│
│  │ - 客户需求词云              │  │                         │
│  │ - 产品切换Tab               │  │                         │
│  │ - 产品详情卡片              │  │                         │
│  │ - 推荐理由+沟通要点         │  │                         │
│  └─────────────────────────────┘  │                         │
└───────────────────────────────────┴─────────────────────────┘
```

---

## 三、功能模块详细说明

### 模块1：客户基础信息

#### 1.1 客户概览卡片
**功能描述**：展示客户核心身份信息，让客户经理一眼了解客户是谁。

**展示内容**：
- 企业图标（根据客户类型显示不同颜色：对公蓝色、零售紫色、个体户橙色）
- 企业名称
- 客户等级标签（战略客户/核心客户/有效客户）
- 当前状态标签（待陌拜/跟进中/进件中/已放款）
- 关注状态（已关注/未关注）
- 数据更新时间
- 基础信息：行业、所在城市、员工人数

**数据字段**：
```typescript
{
  companyName: string;          // 企业名称
  customerType: 'corporate' | 'retail' | 'individual';  // 客户类型
  customerLevel: '战略客户' | '核心客户' | '有效客户';   // 客户等级
  status: 'pending' | 'following' | 'applying' | 'disbursed';  // 状态
  industry: string;             // 行业
  employeeCount: number;        // 员工数
}
```

#### 1.2 AI核心洞察
**功能描述**：用一句话总结客户的核心价值和营销机会，帮助客户经理快速抓住重点。

**展示形式**：绿色背景高亮卡片，带 Sparkles 图标

**示例内容**：
> "优质高新技术企业，经营稳健，有明确扩产融资需求约2000万，票据业务活跃，公私联动潜力大，建议优先推进科创信用贷。"

**数据字段**：
```typescript
{
  oneLiner: string;  // AI生成的一句话洞察
}
```

#### 1.3 智能标签
**功能描述**：自动提取客户的核心特征，生成标签便于快速识别。

**展示形式**：多个圆角标签，前2个绿色高亮，其余灰色

**示例标签**：
- 高新技术企业（绿色）
- A级纳税（绿色）
- 有融资需求（灰色）
- 票据活跃（灰色）
- 公私联动潜力（灰色）

**数据字段**：
```typescript
{
  coreTags: string[];  // 标签数组，按重要性排序
}
```

---

### 模块2：AI客户画像

#### 2.1 七维雷达图
**功能描述**：从7个维度评估客户质量，可视化展示客户的综合画像。

**七个维度**：
| 维度 | 说明 | 评估内容 |
|:---|:---|:---|
| 企业基本面 | 工商/股权/资质 | 股权结构、资质证照、注册资本、经营年限 |
| 经营行业 | 主营/竞争力/上下游 | 行业前景、市场地位、客户集中度、议价能力 |
| 财务三表 | 收入/利润/现金流 | 营收增长、资产负债率、现金流、应收周转 |
| 债务授信 | 合作行/额度/担保 | 现有授信、到期安排、担保情况、或有负债 |
| 交易资金 | 收付款/账户/渠道 | 资金流水、结算量、账户分布、归集情况 |
| 决策链 | CEO/CFO/法务/采购 | 决策人、决策流程、关系深度、沟通进展 |
| 风险合规 | 诉讼/失信/环保 | 司法风险、信用记录、合规情况、处罚记录 |

**数据字段**：
```typescript
{
  dimensionScores: {
    businessFundamentals: number;   // 企业基本面 0-100
    operationAndIndustry: number;   // 经营行业 0-100
    financialStatements: number;    // 财务三表 0-100
    debtAndCredit: number;          // 债务授信 0-100
    transactionAndFunds: number;    // 交易资金 0-100
    decisionChain: number;          // 决策链 0-100
    riskCompliance: number;         // 风险合规 0-100
  }
}
```

**交互说明**：
- 雷达图使用 SVG 绘制
- 显示5层网格线（20%、40%、60%、80%、100%）
- 数据区域填充半透明绿色，边框绿色
- 各顶点显示维度名称

#### 2.2 维度切换标签
**功能描述**：点击任一维度标签，切换查看该维度的详细AI解读。

**交互说明**：
- 7个维度标签横向排列
- 默认不选中任何维度，显示综合解读
- 点击某维度，该标签变为绿色选中态，下方内容切换
- 再次点击已选中的维度，取消选中，回到综合解读
- 切换时有淡入淡出动画

#### 2.3 AI解读内容
**功能描述**：展示AI对客户的深度分析，分为正向（优势）和负向（风险）两部分。

**展示内容**：

**综合解读（未选中维度时）**：
```typescript
{
  positive: [
    '优质高新技术企业，经营稳健，资质齐全',
    '合作9年老客户，综合贡献度246万/年',
    '授信利用率90%，存款日均2,850万',
    '法人为私行客户，公私联动潜力大',
    '无逾期记录，无司法风险，整体风险可控'
  ],
  negative: [
    '他行负债1,500万，票据分散多行',
    '前5大客户集中度62%，存在集中风险',
    '国际业务我行占比仅35%',
    '应收账款周转周期约45天，偏长'
  ]
}
```

**单维度解读（选中维度时）**：
```typescript
{
  summary: string;      // 综合解析（一句话总结）
  positive: string[];   // 正向内容列表
  negative: string[];   // 负向内容列表
  rating: 'excellent' | 'good' | 'fair' | 'poor';  // 评级
  stars: number;        // 星级 1-5
}
```

**示例（企业基本面维度）**：
- 综合解析：企业资质完备、股权清晰，整体基本面优秀，是优质的合作对象。
- 正向内容：
  - 国家高新技术企业，资质完备
  - 成立9年，股权结构稳定清晰
  - 注册资本5000万，实缴到位
- 负向内容：
  - 近期有工商变更记录，需关注
- 评级：优（5星）

---

### 模块3：AI产品推荐

#### 3.1 客户需求词云
**功能描述**：可视化展示AI识别出的客户需求，帮助客户经理理解客户痛点。

**展示形式**：
- 词云布局，不同位置、不同角度散布
- 字体大小根据权重（weight）决定，权重越高字越大
- 颜色根据是否关联当前选中产品变化：
  - 关联需求：绿色高亮
  - 非关联需求：灰色淡显

**数据字段**：
```typescript
{
  needs: [
    { text: '流动资金周转', weight: 100, urgent: true },
    { text: '回款账期长', weight: 95, urgent: true },
    { text: '外汇结算', weight: 85, urgent: false },
    { text: '汇率波动', weight: 75, urgent: true },
    { text: '资金归集', weight: 70, urgent: false },
    { text: '多账户管理', weight: 65, urgent: false },
    { text: '远期套保', weight: 60, urgent: false },
    { text: '银企直连', weight: 50, urgent: false }
  ]
}
```

**交互说明**：
- 词云下方显示"当前产品解决的需求"标签列表
- 切换产品时，词云高亮状态同步变化

#### 3.2 产品切换Tab
**功能描述**：在多个推荐产品之间切换查看。

**展示形式**：
- 横向标签按钮
- 选中态：绿色背景白色文字
- 未选中态：灰色背景
- 第一个产品带绿色小圆点标识"首推"

**数据字段**：
```typescript
{
  productRecommendations: [
    { id: '1', shortName: '流动资金贷款', ... },
    { id: '2', shortName: '收付结算方案', ... },
    { id: '3', shortName: '存款方案', ... }
  ]
}
```

#### 3.3 产品详情卡片
**功能描述**：展示选中产品的详细信息。

**展示内容**：
- 产品图标（根据类别显示不同图标和颜色）
- 产品全名
- "首推"标签（仅第一个产品显示）
- 匹配度星级（1-5星）
- 产品概要（一句话说明产品价值）
- 产品类别标签
- 额度范围
- 利率信息

**产品类别**：
| 类别 | 图标 | 颜色 |
|:---|:---|:---|
| loan（贷款产品） | Banknote | 绿色 |
| international（国际业务） | Globe | 蓝色 |
| bill（票据业务） | Receipt | 紫色 |
| settlement（结算服务） | CreditCard | 蓝色 |
| wealth（财富管理） | Wallet | 橙色 |

**数据字段**：
```typescript
{
  id: string;
  name: string;           // 产品全名
  shortName: string;      // 简称（用于Tab）
  category: 'loan' | 'international' | 'bill' | 'settlement' | 'wealth';
  matchScore: number;     // 匹配度 0-100
  amount: string;         // 额度范围
  rate: string;           // 利率
  summary: string;        // 产品概要
  reason: string;         // 推荐理由
  talkingPoints: string;  // 沟通要点
  relatedNeeds: string[]; // 关联的客户需求
}
```

#### 3.4 推荐理由
**功能描述**：AI解释为什么向该客户推荐这个产品。

**展示形式**：白色卡片，带灯泡图标

**示例**：
> "客户的问题本质是"回款慢导致的阶段性缺口"，不是经营不行。用流贷把缺口平滑掉，能避免停工、错失订单。"

#### 3.5 沟通要点
**功能描述**：提供营销该产品时的沟通话术指导。

**展示形式**：蓝色背景区域，带对话气泡图标

**示例**：
> "把贷款期限和还款节奏按回款周期设计，用授信框架做"随借随还"，让客户在旺季不用反复跑流程。"

---

### 模块4：AI行动手册

#### 4.1 行动策略概览
**功能描述**：展示针对该客户的整体销售策略。

**展示形式**：蓝色背景卡片，2x2网格布局

**展示内容**：
| 字段 | 说明 | 示例 |
|:---|:---|:---|
| 主攻方向 | 核心策略 | 锁定核心决策人+差异化报价 |
| 关键动作 | 具体方法 | 对标竞品利率，突出交叉产品组合 |
| 目标 | 期望结果 | 提高授信占比 + 成交转化 |
| 节奏 | 时间安排 | 本月完成沟通/报价/质检闭环 |

**数据字段**：
```typescript
{
  summary: string;  // 策略摘要
  // 网格内容为固定文案或从策略中提取
}
```

#### 4.2 已采纳行动区域
**功能描述**：展示客户经理已采纳的行动任务。

**展示形式**：绿色背景区域，仅当有已采纳任务时显示

**交互说明**：
- 显示已采纳任务数量
- 每个任务可展开查看详情
- 可点击"X"移除（取消采纳）
- 可点击"标记完成"完成任务

#### 4.3 待采纳行动列表
**功能描述**：展示AI建议的行动任务，等待客户经理采纳执行。

**展示内容**：
- 任务标题
- 优先级标签（紧急/重要）
- 状态标签（待行动/已行动）
- 采纳按钮

**任务优先级**：
- high（紧急）：橙色文字
- medium（重要）：橙色文字
- low（普通）：不显示标签

**数据字段**：
```typescript
{
  tasks: [
    {
      id: string;
      title: string;           // 任务标题
      description: string;     // AI行动建议详情
      priority: 'high' | 'medium' | 'low';
      status: 'pending' | 'in_progress' | 'completed';
      dueDate: string;         // 截止日期
      category: 'contact' | 'document' | 'visit' | 'follow_up' | 'approval';
      aiExecutable: boolean;   // 是否可AI执行
      suggestedScript?: string; // 参考话术
    }
  ]
}
```

#### 4.4 任务详情展开
**功能描述**：展开查看任务的详细信息。

**展示内容**：
- AI行动建议（详细描述）
- 参考话术（蓝色背景）
- 截止日期
- "标记完成"按钮

**交互说明**：
- 点击任务行展开/收起
- 默认展开第一条未完成任务
- 手风琴模式，同时只展开一条

#### 4.5 任务操作
**功能描述**：客户经理对任务的操作能力。

**操作类型**：
| 操作 | 说明 | 触发位置 |
|:---|:---|:---|
| 采纳 | 将任务加入已采纳列表 | 待采纳列表的"采纳"按钮 |
| 移除 | 从已采纳列表移除 | 已采纳列表的"X"按钮 |
| 标记完成 | 完成任务，显示质检结果 | 任务详情的"标记完成"按钮 |

---

## 四、交互动效说明

### 4.1 页面进入动画
- 各模块依次淡入上滑（stagger动画）
- 使用 framer-motion 的 `initial={{ opacity: 0, y: 20 }}` 和 `animate={{ opacity: 1, y: 0 }}`
- 延迟递增：模块1=0s, 模块2=0.1s, 模块3=0.2s, 模块4=0.3s

### 4.2 维度切换动画
- AI解读内容切换时有淡入淡出动画
- 使用 AnimatePresence 组件
- 退出：opacity: 0, y: -10
- 进入：opacity: 0, y: 10 → opacity: 1, y: 0

### 4.3 产品切换动画
- 产品详情卡片切换时有淡入淡出动画
- 词云高亮状态平滑过渡

### 4.4 任务列表动画
- 展开/收起有平滑高度动画
- 箭头图标旋转90度表示展开状态

---

## 五、数据结构汇总

### 5.1 客户基础数据 (CorporateCustomer)
```typescript
type CorporateCustomer = {
  id: string;
  customerType: 'corporate' | 'retail' | 'individual';
  companyName: string;
  industry: string;
  registeredCapital: string;
  establishedYear: number;
  legalRepresentative: string;
  contactPerson: string;
  contactPhone: string;
  address: string;
  status: 'pending' | 'following' | 'applying' | 'disbursed';
  riskLevel: 'low' | 'medium' | 'high';
  lastContactTime: string;
  contactCount: number;
  creditAmount: string;
  existingProducts: string[];
  tags: string[];
  customerLevel?: '战略客户' | '核心客户' | '有效客户';
  customerStar?: string[];
  retailLevel?: '飞燕' | '小燕' | '银' | '金' | '私行' | '钻石';
  merchantName?: string;
}
```

### 5.2 客户画像数据 (CustomerProfile.aiSummary)
```typescript
{
  score: number;           // 综合评分 0-100
  level: '优质' | '良好' | '关注';
  creditLevel: string;     // 信用等级如 'AA'
  riskLevel: '低风险' | '中风险' | '高风险';
  oneLiner: string;        // AI一句话洞察
  coreTags: string[];      // 核心标签
  dimensionScores: {       // 七维评分
    businessFundamentals: number;
    operationAndIndustry: number;
    financialStatements: number;
    debtAndCredit: number;
    transactionAndFunds: number;
    decisionChain: number;
    riskCompliance: number;
  };
}
```

### 5.3 产品推荐数据
```typescript
type ProductRecommendation = {
  id: string;
  name: string;
  shortName: string;
  category: 'loan' | 'international' | 'bill' | 'settlement' | 'wealth';
  matchScore: number;
  amount: string;
  rate: string;
  summary: string;
  reason: string;
  talkingPoints: string;
  relatedNeeds: string[];
}
```

### 5.4 行动手册数据
```typescript
type ActionHandbook = {
  summary: string;
  keyInsights: string[];
  recommendedStrategy: string;
  tasks: ActionTask[];
  timeline: { phase: string; actions: string[] }[];
}

type ActionTask = {
  id: string;
  title: string;
  description: string;
  priority: 'high' | 'medium' | 'low';
  status: 'pending' | 'in_progress' | 'completed';
  dueDate: string;
  category: 'contact' | 'document' | 'visit' | 'follow_up' | 'approval';
  aiExecutable: boolean;
  suggestedScript?: string;
}
```

---

## 六、技术实现说明

### 6.1 技术栈
- 前端框架：React 19.2 + TypeScript
- 构建工具：Vite 7.2
- 动画库：Framer Motion 12.x
- 图标库：Lucide React
- 路由：React Router DOM 7.x
- 样式：TailwindCSS（内联 className）

### 6.2 组件结构
```
CustomerDetail.tsx
├── RadarChart          // 七维雷达图组件（SVG绘制）
├── NeedsWordCloud      // 需求词云组件
└── 主页面
    ├── 顶部标题栏
    ├── 模块1：客户基础信息
    ├── 两栏布局
    │   ├── 左列
    │   │   ├── 模块2：AI客户画像
    │   │   └── 模块3：AI产品推荐
    │   └── 右列
    │       └── 模块4：AI行动手册
```

### 6.3 状态管理
使用 React useState 管理以下状态：
- `tasks`: 行动任务列表
- `selectedDimension`: 当前选中的画像维度
- `adoptedTaskIds`: 已采纳的任务ID列表
- `selectedProductId`: 当前选中的产品ID
- `openTaskId`: 当前展开的任务ID
- `rightHeight`: 右列高度（用于左右对齐）
- `isWide`: 是否宽屏模式

---

## 七、示例数据

### 7.1 示例客户
- 企业名称：杭州智联科技有限公司
- 行业：信息技术
- 客户等级：战略客户
- 状态：跟进中
- 员工数：156人
- 综合评分：87分
- 风险等级：低风险

### 7.2 示例AI洞察
> "优质高新技术企业，经营稳健，有明确扩产融资需求约2000万，票据业务活跃，公私联动潜力大，建议优先推进科创信用贷。"

### 7.3 示例推荐产品
1. 流动资金贷款 + 随借随还授信（匹配度98%）
2. 国内收付结算一体化方案（匹配度92%）
3. 存款增值方案（匹配度85%）

### 7.4 示例行动任务
1. 电话确认融资需求细节（紧急）
2. 准备科创贷产品方案（紧急）
3. 收集授信申请材料（紧急）
4. 安排上门拜访（重要）
5. 推进票据池业务（重要）

---

## 八、请根据以上内容生成商务报价功能清单

请生成一份适合向银行客户提交的**商务报价功能清单**，要求：

1. **格式**：表格形式，包含序号、功能模块、功能点、功能描述、交付物
2. **粒度**：功能点拆分到可独立开发、可独立验收的级别
3. **描述**：用银行客户能理解的业务语言，避免技术术语
4. **完整性**：覆盖上述所有功能，不遗漏
5. **可选**：可以增加"优先级"或"是否必选"列，便于分期报价

---

*文档生成时间：2024年*
